# 重构前需要想清楚的事

读[坑：重构过程中的过度设计](http://blog.jobbole.com/109903/)小记

系统架构师，业务架构师，PPT架构师

码农们总是看不上别人的代码，特别是接手的有年头的项目代码，甚至还要在上面添加新的功能，就更各种吐槽了，这时候，各种重构，甚至重写的想法冒出



只能说，重构&重写本身是软件工程中很重要的手段，但是法轮大法好，不能瞎用，要找准时机，一定要思前想后，是不是应该重构了？



[坑：重构过程中的过度设计](http://blog.jobbole.com/109903/)文中谈到了作者认为得重构必要条件，第一条是必须满足的:



-   现有系统的所有功能模块和对外接口都了解得非常清楚了。如果你没把对外接口了解得非常清楚，重构完了以后外部的依赖系统必然要跟着改，那就是个无底洞了。
-   现有系统有明显的重大BUG，并且在现有条件下无法解决或者很难解决。如果仅仅是系统有BUG，那么解决BUG就好了，完全没有必要为了BUG来重构，只有当确实BUG已经无法解决或者解决的成本实在太高了，才有重构的必要。
-   文档缺失或者维护人员大量离职导致目前系统的可维护性降低，很难添加新功能。如果大家都很熟悉现有系统，可以很快的在上面迭代新功能，你重新来一个系统干什么呢？
-   现有系统在可预见的未来无法支撑业务的发展了。只有当业务部门已经跑到了技术部门前面了，可以预见得到业务发展的方向了，再来审视目前的系统，发现已经无法继续支撑了，这时候才需要重构现有系统。

重构最忌讳的用以下理由来重构系统

-   现有代码太臃肿，实现不完美。难道你重新实现一个就完美了？
-   这个系统的技术栈太陈旧，没有使用最新的技术流，以后肯定会落伍。难道用了新技术就不会落伍？
-   现有系统没有考虑高可用的情况，要是出问题了就是大问题。
-   这个语言就不适合做这个系统，得用XXX语言来实现。虽然说每个语言都有他擅长的场景，但是一个既有系统更换实现语言，是一件成本非常高的事情。



高可用的架构不存在，存在的只有高可用的代码，高可用的代码是逐年累月修复出来的，不要轻易『动』它，除非你有充分的理由！

总而言之，重构一个系统最需要考虑的就两个词：成本(系统对外表现方面稳定性代价成本、工程师付出成本)，收益(系统对外表现方面的收益，而不是所谓代码看起来更整洁了、工程师维护收益，是不是更容易了)； 需要衡量各方面的成本后，再考虑是否需要重构，这样的重构才是有意义的重构。



**®声明: 个人笔记，多数内容整理自网络，未规范标注出处，如有冒犯，请联系处理**

​             **内容有误，如有耽误，烦请见谅**









